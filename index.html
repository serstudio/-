<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SeRoF Studio | Lidar Official</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --bg: #050505; --text: #ffffff; --primary: #6366f1; 
            --panel-bg: rgba(10, 10, 10, 0.98); --border: rgba(99, 102, 241, 0.3);
        }

        /* ТЕМЫ */
        body.light-mode { 
            --bg: #e5e5e5; --text: #111111; --primary: #000000; 
            --panel-bg: rgba(240, 240, 240, 0.98); --border: rgba(0, 0, 0, 0.15); 
        }

        /* КУРСОР: В белом режиме становится черным */
        #custom-cursor { 
            position: fixed; width: 15px; height: 15px; 
            border: 2px solid var(--primary); border-radius: 50%; 
            pointer-events: none; z-index: 100001; 
            transform: translate(-50%, -50%); transition: 0.1s;
        }
        body.light-mode #custom-cursor {
            border-color: #000000 !important;
            background: rgba(0,0,0,0.1);
        }

        #emergency-overlay {
            position: fixed; inset: 0; background: #000; z-index: 99999;
            display: none; flex-direction: column; align-items: center; justify-content: center;
            text-align: center; cursor: none !important;
        }

        .glitch-text {
            font-size: 3rem; font-weight: 900; color: #ff3333; text-transform: uppercase;
            letter-spacing: 0.2em; animation: pulse 2s infinite ease-in-out;
            text-shadow: 0 0 20px rgba(255,0,0,0.5);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); filter: blur(0px); }
            50% { opacity: 0.7; transform: scale(0.95); filter: blur(2px); }
        }

        body.is-admin #emergency-overlay { display: none !important; }
        body.emergency-active .side-btn { display: none !important; }

        .dev-only { display: none !important; }
        .dev-visible { display: flex !important; }
        
        #pass-gate { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 100000; display: none; align-items: center; justify-content: center; backdrop-filter: blur(10px); }

        * { cursor: none !important; user-select: none; box-sizing: border-box; }
        body, html { background-color: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; transition: 0.5s; margin: 0; overflow: hidden; width: 100%; height: 100%; }
        
        #lidar-canvas { position: fixed; inset: 0; z-index: 1; pointer-events: none; }
        .side-btn { position: fixed; width: 50px; height: 50px; background: var(--panel-bg); backdrop-filter: blur(5px); border: 1px solid var(--border); border-radius: 14px; display: flex; align-items: center; justify-content: center; z-index: 110; transition: 0.4s; color: var(--primary); }
        .terminal-panel { position: fixed; top: 0; width: 380px; height: 100%; background: var(--panel-bg); z-index: 120; transition: 0.5s; padding: 30px; display: flex; flex-direction: column; }
        #settings-panel { left: -380px; border-right: 1px solid var(--border); }
        #dev-panel { right: -380px; border-left: 1px solid var(--border); }
        #settings-panel.open { transform: translateX(380px); }
        #dev-panel.open { transform: translateX(-380px); }

        .btn-interact { pointer-events: auto; }
        .switch { width: 40px; height: 20px; background: #333; border-radius: 20px; position: relative; cursor: pointer; }
        .switch-on { background: #ff3333; }
        .switch::after { content: ''; position: absolute; width: 16px; height: 16px; background: white; border-radius: 50%; top: 2px; left: 2px; transition: 0.3s; }
        .switch-on::after { left: 22px; }
    </style>
</head>
<body id="main-body">

<div id="emergency-overlay">
    <div class="glitch-text">Идет обновление сайта</div>
    <p class="text-white/30 mt-4 text-[10px] tracking-[1em] uppercase">Пожалуйста, зайдите позже</p>
</div>

<div id="pass-gate">
    <div class="bg-[#0a0a0a] p-10 rounded-3xl border border-indigo-500 text-center">
        <h3 class="text-white font-black mb-6 uppercase tracking-widest text-xs">Admin Access</h3>
        <input type="password" id="admin-pass-input" class="mb-4 text-center btn-interact w-full p-3 bg-white/5 border border-white/10 rounded-xl outline-none" placeholder="••••">
        <button onclick="checkPass()" class="w-full bg-indigo-600 py-3 rounded-xl font-bold btn-interact">ВХОД</button>
    </div>
</div>

<div id="custom-cursor"></div>
<canvas id="lidar-canvas"></canvas>

<button class="side-btn btn-interact" style="left: 40px; top: 40%;" onclick="openPanel('settings-panel')">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-6 h-6"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
</button>

<button id="btn-dev" class="side-btn btn-interact dev-only" style="left: 40px; top: 52%;" onclick="openPanel('dev-panel')">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-6 h-6"><polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line></svg>
</button>

<div id="settings-panel" class="terminal-panel">
    <div class="flex justify-between items-center mb-8">
        <h2 class="text-2xl font-black italic text-indigo-500">SYSTEM</h2>
        <div onclick="closePanels()" class="btn-interact cursor-pointer opacity-50 hover:opacity-100">✕</div>
    </div>
    <div class="space-y-4 mb-8 flex-grow">
        <div class="flex justify-between items-center p-4 rounded-xl btn-interact bg-white/5" onclick="toggleTheme()">
            <span class="text-[10px] font-bold uppercase tracking-widest">Тема</span>
            <div id="sw-light" class="switch"></div>
        </div>
        <div class="grid grid-cols-2 gap-2">
            <button onclick="changeLang('RU')" class="p-3 bg-white/5 rounded-xl text-[10px] font-bold btn-interact">RU</button>
            <button onclick="changeLang('EN')" class="p-3 bg-white/5 rounded-xl text-[10px] font-bold btn-interact">EN</button>
        </div>
    </div>
</div>

<div id="dev-panel" class="terminal-panel">
    <div class="flex justify-between items-center mb-8">
        <h2 class="text-2xl font-black italic text-red-500">CONSOLE</h2>
        <div onclick="closePanels()" class="btn-interact cursor-pointer opacity-50 hover:opacity-100">✕</div>
    </div>
    <div class="p-4 rounded-xl mb-4 flex justify-between items-center btn-interact bg-red-500/10 border border-red-500/30" onclick="toggleEmergency()">
        <span class="text-red-500 font-bold text-[10px] tracking-widest">РЕЖИМ ОБНОВЛЕНИЯ</span>
        <div id="sw-sus" class="switch"></div>
    </div>
</div>

<div id="main-content" class="relative z-10 w-full h-full flex flex-col items-center justify-center pointer-events-none text-center">
    <h1 id="title" class="text-7xl md:text-9xl font-black italic tracking-tighter btn-interact" onclick="logoClick()">SEROF</h1>
    <p id="sub" class="mt-4 text-[10px] tracking-[1.5em] font-bold opacity-30 uppercase">Lidar Horror Studio</p>
</div>

<script>
    const ADMIN_PASS = "1234";
    let isDevMode = false;
    let clicks = 0;
    let emergency = localStorage.getItem('global_update') === 'true';

    function logoClick() { 
        clicks++; 
        if(clicks >= 5) { 
            document.getElementById('pass-gate').style.display='flex'; 
            clicks=0; 
        } 
    }

    function checkPass() {
        if(document.getElementById('admin-pass-input').value === ADMIN_PASS) {
            isDevMode = true;
            document.body.classList.add('is-admin');
            document.getElementById('pass-gate').style.display = 'none';
            document.getElementById('btn-dev').classList.add('dev-visible');
            showToast("ADMIN ACCESS GRANTED");
        } else { showToast("WRONG PASSWORD", true); }
        document.getElementById('admin-pass-input').value = '';
    }

    function toggleEmergency() {
        emergency = !emergency;
        localStorage.setItem('global_update', emergency);
        updateUI();
    }

    function updateUI() {
        const overlay = document.getElementById('emergency-overlay');
        const sw = document.getElementById('sw-sus');
        if(emergency) {
            document.body.classList.add('emergency-active');
            overlay.style.display = 'flex';
            if(sw) sw.classList.add('switch-on');
        } else {
            document.body.classList.remove('emergency-active');
            overlay.style.display = 'none';
            if(sw) sw.classList.remove('switch-on');
        }
    }

    function showToast(txt, isRed = false) {
        let t = document.createElement('div');
        t.className = `fixed top-10 left-1/2 -translate-x-1/2 px-6 py-3 rounded-2xl z-[200000] font-bold text-[10px] text-white ${isRed?'bg-red-600':'bg-indigo-600'}`;
        t.innerText = txt.toUpperCase();
        document.body.appendChild(t);
        setTimeout(() => { t.remove(); }, 2000);
    }

    function openPanel(id) { closePanels(); document.getElementById(id).classList.add('open'); }
    function closePanels() { document.querySelectorAll('.terminal-panel').forEach(p => p.classList.remove('open')); }
    
    function toggleTheme() { 
        document.body.classList.toggle('light-mode'); 
        document.getElementById('sw-light').classList.toggle('switch-on');
    }

    function changeLang(l) { showToast("LANG: " + l); }

    // LIDAR: Прицел теперь адаптируется под цвет фона
    const canvas = document.getElementById('lidar-canvas'), ctx = canvas.getContext('2d');
    let mX=0, mY=0, pts=[];
    function init() {
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        pts = []; for(let x=0; x<canvas.width; x+=45) for(let y=0; y<canvas.height; y+=45) pts.push({x,y});
    }
    function draw() {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        // Берем цвет --primary (в белой теме он черный)
        ctx.fillStyle = getComputedStyle(document.body).getPropertyValue('--primary').trim();
        pts.forEach(p => {
            const d = Math.sqrt((mX-p.x)**2 + (mY-p.y)**2);
            if(d < 220) {
                ctx.globalAlpha = (1 - d/220);
                ctx.beginPath(); ctx.arc(p.x, p.y, 1.2, 0, Math.PI*2); ctx.fill();
            }
        });
        requestAnimationFrame(draw);
    }
    window.addEventListener('mousemove', e => {
        mX = e.clientX; mY = e.clientY;
        const cur = document.getElementById('custom-cursor');
        cur.style.left = mX+'px'; cur.style.top = mY+'px';
    });
    window.onresize = init; init(); draw(); updateUI();
</script>
</body>
</html>
</html>

